/* These are the instructions for getting your RockSim NOSE CONE data into this scad file
 * 1. Open your RockSim model.
 * 2. Select the Nose Cone and select Edit
 * 3. Set the noseConeLength and the noseConeWidth variables below according to the values in RockSim
 * 4. Set the noseConeShoulderLength and the noseConeShoulderWidth variables below according to the values in RockSim by going to the "shoulder" tab in RockSim 
 * 5. Select "Export Template" and save it as an svg file to somewhere you can find it.
 * 6. Download an install the "Inkscape to OpenSCAD Converter here -> http://www.thingiverse.com/thing:25036 according to the instructions on the page if you haven't done so already
 * 7. Open the exported svg in Inkscape
 * 8. Chose File->Document Properties-> Then change both sets of units to mm
 * 9. Chose Path->Object To Path after selecting the nose cone
 * 10. Click the "Edit Paths By Nodes" button on the left toolbar
 * 11. Select the center line and hit delete on your keyboard
 * 12. Select the far right line (The bottom of the shoulder) And hit the "Insert new node button"
 * 13. Drag select all of the nodes on the bottom half of the nose cone except for the tip of the nose cone and the new node on the bottom of the shoulder. Delete these nodes.
 * 14. "Shift" select the nodes on the tip of the nose cone and the midpoint of the bottom of the shoulder
 * 15. Click the "Delete segment between nodes" button
 * 16. Click the "Join selected nodes with new segment" button to add back a straight segment
 * 17. Click the "Select and tranform objects" button on the left toolbar (The Mouse Icon)
 * 18. Click on the nose cone and set the x,y coordinates on the top toolbar to 0,0
 * 19. Save the svg
 * 20. Select Extensions->Generate From Path->Paths To OpenSCAD
 * 21. Set the ouput file path to a place you can find it
 * 22. Leave the other two parameters alone and click "apply"
 * 23. Open the newly exported scad file and find "polygon" call. There should only be one polygon call. If there are more than one, OpenSCAD will not work. So make sure there's only 1! Copy the polygon's data (read: NOT the linear_extrude!) and paste it over the noseConePoints data below (In Variables.scad)
 * 24. Uncomment the test in NoseCone.scad to make sure everything worked. If it worked, now is the time to laugh maniacally!
 */

/* These are the instructions for getting your RockSim FIN data into this scad file
 * 1. Open your RockSim model.
 * 2. Select the Fin Set and select Edit
 * 3. Select "Export Template" and save it as an svg file to somewhere you can find it.
 * 4. Download an install the "Inkscape to OpenSCAD Converter here -> http://www.thingiverse.com/thing:25036 according to the instructions on the page if you haven't done so already
 * 5. Open the exported svg in Inkscape
 * 6. Chose File->Document Properties-> Then change both sets of units to mm
 * 7. Click the "Select and tranform objects" button on the left toolbar (The Mouse Icon)
 * 8. Click on the nose cone and set the x,y coordinates on the top toolbar to 0,0
 * 9. Chose Path->Object To Path after selecting the nose cone
 * 10. Set the finLength variable below to what inkscape says is the width in it's toolbar. And set the finSemiSpan variable below to what inkscape says is the height in it's toolbar.
 * 11. Click the "Edit Paths By Nodes" button on the left toolbar
 * 12. Select the fin
 * 13. Select the endpoint node of the root chord and set the finRootChordLength variable below to what inkscape says is the x location for the node
 * 14. Save the svg
 * 15. Select Extensions->Generate From Path->Paths To OpenSCAD
 * 16. Set the ouput file path to a place you can find it
 * 17. Leave the other two parameters alone and click "apply"
 * 18. Open the newly exported scad file and find "polygon" call. There should only be one polygon call. If there are more than one, OpenSCAD will not work. So make sure there's only 1! Copy the polygon's data (read: NOT the linear_extrude!) and paste it over the noseConePoints data below (In Variables.scad)
 * 19. Uncomment the test in Fins.scad to make sure everything worked. If it worked, now is the time to laugh maniacally!
 */

// You can change this to whatever resolution your heart desires
$fn = 64;

// You MUST change these variables in order for your custom nose cone to work properly
noseConeLength = 50.8;
noseConeWidth = 30.48;
noseConeShoulderLength = 17.78;
noseConeShoulderWidth = 28.96;
noseConePoints = [[-121.500000,26.999975],[-120.600000,26.729975],[-119.700000,26.459975],[-118.800000,26.189975],[-117.900000,25.919975],[-117.000000,25.649975],[-116.100000,25.379975],[-115.200000,25.109975],[-114.300000,24.839975],[-113.400000,24.569975],[-112.500000,24.299975],[-111.600000,24.029975],[-110.700000,23.759975],[-109.800000,23.489975],[-108.900000,23.219975],[-108.000000,22.949975],[-107.100000,22.679975],[-106.200000,22.409975],[-105.300000,22.139975],[-104.400000,21.869975],[-103.500000,21.599975],[-102.600000,21.329975],[-101.700000,21.059975],[-100.800000,20.789975],[-99.900000,20.519975],[-99.000000,20.249975],[-98.100000,19.979975],[-97.200000,19.709975],[-96.300000,19.439975],[-95.400000,19.169975],[-94.500000,18.899975],[-93.600000,18.629975],[-92.700000,18.359975],[-91.800000,18.089975],[-90.900000,17.819975],[-90.000000,17.549975],[-89.100000,17.279975],[-88.200000,17.009975],[-87.300000,16.739975],[-86.400000,16.469975],[-85.500000,16.199975],[-84.600000,15.929975],[-83.700000,15.659975],[-82.800000,15.389975],[-81.900000,15.119975],[-81.000000,14.849975],[-80.100000,14.579975],[-79.200000,14.309975],[-78.300000,14.039975],[-77.400000,13.769975],[-76.500000,13.499975],[-75.600000,13.229975],[-74.700000,12.959975],[-73.800000,12.689975],[-72.900000,12.419975],[-72.000000,12.149975],[-71.100000,11.879975],[-70.200000,11.609975],[-69.300000,11.339975],[-68.400000,11.069975],[-67.500000,10.799975],[-66.600000,10.529975],[-65.700000,10.259975],[-64.800000,9.989975],[-63.900000,9.719975],[-63.000000,9.449975],[-62.100000,9.179975],[-61.200000,8.909971],[-60.300000,8.639971],[-59.400000,8.369971],[-58.500000,8.099971],[-57.600000,7.829971],[-56.700000,7.559971],[-55.800000,7.289971],[-54.900000,7.019971],[-54.000000,6.749971],[-53.100000,6.479971],[-52.200000,6.209971],[-51.300000,5.939971],[-50.400000,5.669971],[-49.500000,5.399971],[-48.600000,5.129971],[-47.700000,4.859971],[-46.800000,4.589971],[-45.900000,4.319971],[-45.000000,4.049971],[-44.100000,3.779971],[-43.200000,3.509971],[-42.300000,3.239971],[-41.400000,2.969971],[-40.500000,2.699971],[-39.600000,2.429971],[-38.700000,2.159971],[-37.800000,1.889971],[-36.900000,1.619971],[-36.000000,1.349971],[-35.100000,1.079971],[-34.200000,0.809971],[-33.300000,0.539971],[-32.400000,0.269971],[-31.500000,-0.000029],[-30.600000,-0.270029],[-29.700000,-0.540029],[-28.800000,-0.810029],[-27.900000,-1.080029],[-27.000000,-1.350029],[-26.100000,-1.620029],[-25.200000,-1.890029],[-24.300000,-2.160029],[-23.400000,-2.430029],[-22.500000,-2.700029],[-21.600000,-2.970029],[-20.700000,-3.240029],[-19.800000,-3.510029],[-18.900000,-3.780029],[-18.000000,-4.050029],[-17.100000,-4.320029],[-16.200000,-4.590029],[-15.300000,-4.860029],[-14.400000,-5.130029],[-13.500000,-5.400029],[-12.600000,-5.670029],[-11.700000,-5.940029],[-10.800000,-6.210029],[-9.900000,-6.480029],[-9.000000,-6.750029],[-8.100000,-7.020029],[-7.200000,-7.290029],[-6.300000,-7.560029],[-5.400000,-7.830029],[-4.500000,-8.100029],[-3.600000,-8.370029],[-2.700000,-8.640029],[-1.800000,-8.910029],[-0.900000,-9.180029],[0.000000,-9.450029],[0.900000,-9.720029],[1.800000,-9.990029],[2.700000,-10.260029],[3.600000,-10.530029],[4.500000,-10.800029],[5.400000,-11.070029],[6.300000,-11.340029],[7.200000,-11.610029],[8.100000,-11.880029],[9.000000,-12.150029],[9.900000,-12.420029],[10.800000,-12.690029],[11.700000,-12.960029],[12.600000,-13.230029],[13.500000,-13.500029],[14.400000,-13.770029],[15.300000,-14.040029],[16.200000,-14.310029],[17.100000,-14.580029],[18.000000,-14.850029],[18.900000,-15.120029],[19.800000,-15.390029],[20.700000,-15.660029],[21.600000,-15.930029],[22.500000,-16.200029],[23.400000,-16.470029],[24.300000,-16.740029],[25.200000,-17.010029],[26.100000,-17.280029],[27.000000,-17.550029],[27.900000,-17.820029],[28.800000,-18.090029],[29.700000,-18.360029],[30.600000,-18.630029],[31.500000,-18.900029],[32.400000,-19.170029],[33.300000,-19.440029],[34.200000,-19.710029],[35.100000,-19.980029],[36.000000,-20.250029],[36.900000,-20.520029],[37.800000,-20.790029],[38.700000,-21.060029],[39.600000,-21.330029],[40.500000,-21.600029],[41.400000,-21.870029],[42.300000,-22.140029],[43.200000,-22.410029],[44.100000,-22.680029],[45.000000,-22.950029],[45.900000,-23.220029],[46.800000,-23.490029],[47.700000,-23.760029],[48.600000,-24.030029],[49.500000,-24.300029],[50.400000,-24.570029],[51.300000,-24.840029],[52.200000,-25.110029],[53.100000,-25.380029],[54.000000,-25.650029],[54.900000,-25.920029],[55.800000,-26.190029],[56.700000,-26.460029],[57.600000,-26.730029],[58.500000,-27.000029],[58.500000,-24.307112],[121.500000,-24.307112],[121.500000,27.000029]];

// You also MUST change these variables to get your custom fins to work
finLength = 123.987;
finSemiSpan = 48.801;
finRootChordLength = 50.917;
finThroughTheWallMountLength = 30.0;
finThroughTheWallMountDepth = 0.76;
finThroughTheWallMountOffset = 10.018;
finThickness = 2.38;
finPoints = [[-39.247200,83.703600],[219.600000,-86.396400],[212.400000,-86.396400],[200.905200,-86.396400],[193.968000,-86.396400],[188.524800,-86.396400],[182.806200,-85.852148],[175.500000,-84.564513],[169.200000,-82.796400],[162.900000,-81.025812],[155.809800,-78.575967],[150.367500,-76.496400],[143.118000,-73.295370],[135.974700,-70.255260],[128.503800,-66.596400],[119.700000,-61.816500],[107.100000,-55.283310],[0.900000,4.737600],[-43.200000,29.403900],[-68.400000,44.103600],[-80.100000,50.403600],[-85.832100,53.103600],[-96.454800,57.603600],[-103.500000,60.303600],[-110.700000,63.003600],[-118.800000,65.703600],[-124.884000,67.503600],[-130.500000,69.303600],[-136.800000,71.103600],[-144.900000,72.903600],[-149.400000,73.803600],[-158.419170,75.603600],[-169.200000,77.403600],[-176.122890,78.291900],[-184.975110,79.203600],[-195.540480,80.217000],[-204.083370,81.262800],[-209.700000,81.960300],[-213.323598,82.483200],[-219.600000,83.703600],[-184.166910,83.703600],[-184.166910,86.396400],[-77.868000,86.396400],[-77.868000,83.703600]];

/*// You MUST change these variables in order for your custom nose cone to work properly
noseConeLength = 34.80;
noseConeWidth = 25.725;
noseConeShoulderLength = 12.70;
noseConeShoulderWidth = 24.00;
noseConePoints = [[-84.153600,22.756905],[-83.537065,19.538595],[-82.920528,18.205515],[-82.303992,17.182575],[-81.687456,16.320285],[-81.070920,15.560505],[-80.454384,14.873625],[-79.837848,14.242005],[-79.221321,13.654125],[-78.604785,13.101975],[-77.988249,12.579705],[-77.371713,12.082905],[-76.755177,11.608335],[-76.138641,11.153115],[-75.522105,10.715085],[-74.905560,10.292445],[-74.289060,9.883665],[-73.672470,9.487485],[-73.055970,9.102735],[-72.439470,8.728605],[-71.822880,8.364195],[-71.206380,8.008695],[-70.589790,7.661655],[-69.973290,7.322445],[-69.356790,6.990435],[-68.740200,6.665355],[-68.123700,6.346665],[-67.507110,6.034005],[-66.890610,5.727195],[-66.274110,5.425785],[-65.657520,5.129505],[-65.041020,4.838085],[-64.424430,4.551345],[-63.807930,4.269105],[-63.191430,3.991095],[-62.574840,3.717135],[-61.958340,3.447045],[-61.341750,3.180645],[-60.725250,2.917845],[-60.108750,2.658555],[-59.492160,2.402505],[-58.875660,2.149605],[-58.259070,1.899855],[-57.642570,1.652985],[-57.026070,1.408995],[-56.409480,1.167795],[-55.792980,0.929205],[-55.176390,0.693225],[-54.559890,0.459765],[-53.943390,0.228735],[-53.326800,-0.000045],[-52.710300,-0.226485],[-52.093800,-0.450675],[-51.477210,-0.672795],[-50.860710,-0.892755],[-50.244120,-1.110735],[-49.627620,-1.326735],[-49.011120,-1.540845],[-48.394530,-1.753065],[-47.778030,-1.963395],[-47.161440,-2.172015],[-46.544940,-2.378925],[-45.928440,-2.584125],[-45.311850,-2.787705],[-44.695350,-2.989575],[-44.078760,-3.190005],[-43.462260,-3.388815],[-42.845760,-3.586095],[-42.229170,-3.782025],[-41.612670,-3.976425],[-40.996080,-4.169475],[-40.379580,-4.361085],[-39.763080,-4.551435],[-39.146490,-4.740345],[-38.529990,-4.928085],[-37.913400,-5.114475],[-37.296900,-5.299695],[-36.680400,-5.483655],[-36.063810,-5.666445],[-35.447310,-5.848065],[-34.830810,-6.028605],[-34.214220,-6.207885],[-33.597720,-6.386175],[-32.981130,-6.563295],[-32.364630,-6.739425],[-31.748130,-6.914475],[-31.131540,-7.088535],[-30.515040,-7.261515],[-29.898450,-7.433595],[-29.281950,-7.604595],[-28.665450,-7.774695],[-28.048860,-7.943805],[-27.432360,-8.112105],[-26.815770,-8.279415],[-26.199270,-8.445825],[-25.582770,-8.611335],[-24.966180,-8.776035],[-24.349680,-8.939835],[-23.733090,-9.102735],[-23.116590,-9.264915],[-22.500090,-9.426195],[-21.883500,-9.586755],[-21.267000,-9.746505],[-20.650410,-9.905445],[-20.033910,-10.063575],[-19.417410,-10.220985],[-18.800820,-10.377675],[-18.184320,-10.533555],[-17.567730,-10.688805],[-16.951230,-10.843245],[-16.334730,-10.997055],[-15.718140,-11.150145],[-15.101640,-11.302515],[-14.485140,-11.454255],[-13.868550,-11.605275],[-13.252050,-11.755665],[-12.635460,-11.905425],[-12.018960,-12.054465],[-11.402460,-12.202965],[-10.785870,-12.350745],[-10.169370,-12.497985],[-9.552780,-12.644505],[-8.936280,-12.790485],[-8.319780,-12.935925],[-7.703190,-13.080735],[-7.086690,-13.224915],[-6.470100,-13.368555],[-5.853600,-13.511655],[-5.237100,-13.654125],[-4.620510,-13.796100],[-4.004010,-13.937508],[-3.387420,-14.078367],[-2.770920,-14.218695],[-2.154420,-14.358492],[-1.537830,-14.497758],[-0.921330,-14.636511],[-0.304740,-14.774751],[0.311760,-14.912478],[0.928260,-15.049710],[1.544850,-15.186447],[2.161350,-15.322689],[2.777940,-15.458445],[3.394440,-15.593715],[4.010940,-15.728517],[4.627530,-15.862851],[5.244030,-15.996708],[5.860800,-16.130115],[6.477300,-16.263063],[7.093800,-16.395561],[7.710300,-16.527609],[8.326800,-16.659216],[8.943300,-16.790382],[9.559800,-16.921116],[10.176300,-17.051427],[10.792800,-17.181306],[11.409300,-17.310762],[12.025800,-17.439804],[12.642300,-17.568441],[13.258800,-17.696655],[13.875300,-17.824473],[14.491800,-17.951886],[15.108300,-18.078903],[15.724800,-18.205524],[16.341300,-18.331758],[16.957800,-18.457605],[17.574300,-18.583065],[18.191700,-18.708156],[18.808200,-18.832860],[19.424700,-18.957195],[20.041200,-19.081161],[20.657700,-19.204758],[21.274200,-19.327995],[21.890700,-19.450872],[22.507200,-19.573389],[23.123700,-19.695555],[23.740200,-19.817370],[24.356700,-19.938834],[24.973200,-20.059956],[25.589700,-20.180736],[26.206200,-20.301183],[26.822700,-20.421288],[27.439200,-20.541060],[28.055700,-20.660508],[28.672200,-20.779623],[29.288700,-20.898405],[29.905200,-21.016881],[30.521700,-21.135024],[31.138200,-21.252852],[31.754700,-21.370374],[32.371200,-21.487572],[32.987700,-21.604473],[33.605100,-21.721059],[34.221600,-21.837339],[34.838100,-21.953320],[35.454600,-22.069000],[36.071100,-22.184382],[36.687600,-22.299468],[37.304100,-22.414261],[37.920600,-22.528764],[38.537100,-22.642978],[39.153600,-22.756905],[39.153600,-19.762812],[84.153600,-19.762812],[84.153600,22.756892]];

// You also MUST change these variables to get your custom fins to work
finLength = 126.063;
finSemiSpan = 26.206;
finRootChordLength = 85.422;
finThroughTheWallMountLength = 70.0;
finThroughTheWallMountDepth = 0.798;
finThroughTheWallMountOffset = 7.518;
finThickness = 1.5;
finPoints = [[79.337250,43.602300],[-14.301450,23.282820],[223.277850,-46.366200],[-223.277850,43.602300],[-196.703010,43.602300],[-196.703010,46.366200],[51.328350,46.366200],[51.328350,43.602300]];*/

// ***** Don't change these variables ******//
offsetMargin = 0.1;
noseConeTotalLength = noseConeLength + noseConeShoulderLength;